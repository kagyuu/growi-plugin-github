const F="growi-plugin-today-embed",P="1.0.0",j="GROWI plugin for embed today",M="MIT",N=["growi","growi-plugin"],S="module",$={dev:"vite",build:"tsc && vite build",preview:"vite preview"},O={react:"^18.3.1","react-dom":"^18.3.1","react-innertext":"^1.1.5",unified:"^11.0.5","unist-util-visit":"^5.0.0"},E={"@types/react":"^18.3.3","@types/react-dom":"^18.3.0","@typescript-eslint/eslint-plugin":"^5.0.0","@typescript-eslint/parser":"^5.0.0","@vitejs/plugin-react":"^4.3.1",eslint:"^8.18.0","eslint-config-next":"^14.2.4","eslint-config-weseek":"^2.1.0","eslint-import-resolver-typescript":"^3.2.5","eslint-plugin-import":"^2.29.1","eslint-plugin-jest":"^27.1.0","eslint-plugin-react":"^7.30.1","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-regex":"^1.10.0",jest:"^29.7.0",typescript:"^5.5.2",vite:"^5.3.2"},G={schemaVersion:"4",types:["script"]},L={name:F,version:P,description:j,license:M,keywords:N,type:S,scripts:$,dependencies:O,devDependencies:E,growiPlugin:G},A=function(e){if(e==null)return Y;if(typeof e=="function")return m(e);if(typeof e=="object")return Array.isArray(e)?R(e):W(e);if(typeof e=="string")return q(e);throw new Error("Expected function, string, or object as test")};function R(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=A(e[n]);return m(r);function r(...o){let c=-1;for(;++c<t.length;)if(t[c].apply(this,o))return!0;return!1}}function W(e){const t=e;return m(n);function n(r){const o=r;let c;for(c in e)if(o[c]!==t[c])return!1;return!0}}function q(e){return m(t);function t(n){return n&&n.type===e}}function m(e){return t;function t(n,r,o){return!!(_(n)&&e.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function Y(){return!0}function _(e){return e!==null&&typeof e=="object"&&"type"in e}const I=[],B=!0,v=!1,C="skip";function H(e,t,n,r){let o;typeof t=="function"&&typeof n!="function"?(r=n,n=t):o=t;const c=A(o),u=r?-1:1;i(e,void 0,[])();function i(s,y,a){const p=s&&typeof s=="object"?s:{};if(typeof p.type=="string"){const l=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(s.type+(l?"<"+l+">":""))+")"})}return b;function b(){let l=I,d,f,k;if((!t||c(s,y,a[a.length-1]||void 0))&&(l=K(n(s,a)),l[0]===v))return l;if("children"in s&&s.children){const g=s;if(g.children&&l[0]!==C)for(f=(r?g.children.length:-1)+u,k=a.concat(g);f>-1&&f<g.children.length;){const T=g.children[f];if(d=i(T,f,k)(),d[0]===v)return d;f=typeof d[1]=="number"?d[1]:f+u}}return l}}}function K(e){return Array.isArray(e)?e:typeof e=="number"?[B,e]:e==null?I:[e]}function U(e,t,n,r){let o,c,u;typeof t=="function"&&typeof n!="function"?(c=void 0,u=t,o=n):(c=t,u=n,o=r),H(e,c,i,o);function i(s,y){const a=y[y.length-1],p=a?a.children.indexOf(s):void 0;return u(s,p,a)}}const D=function(){return e=>{U(e,t=>{const n=t;if(n.name!=="today")return;const r="today-"+Math.random().toString(36).slice(2);n.type="html",n.value=`<div id="${r}"></div>`;const o=setInterval(()=>{document.querySelector("#"+r)!=null&&(document.querySelector("#"+r).innerHTML=V(),clearInterval(o))},100)})}},V=function(){const e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),o=e.getDay(),c=o===0?r-6:r-(o-1),u=c+7;var i=[];return i.push('<fieldset style="border:dotted 2px lightgray">'),i.push("<legend>"+e.toISOString().slice(0,10)+"</legend>"),i.push(t.toString()),i.push("<br/>"),i.push(h(new Date(t,0,1),new Date(t+1,0,1),e)),i.push("<br/>"),i.push(e.toLocaleDateString("en",{month:"long"})),i.push("<br/>"),i.push(h(new Date(t,n,1),new Date(t,n+1,1),e)),i.push("<br/>"),i.push("Week "+X(e)),i.push("<br/>"),i.push(h(new Date(t,n,c),new Date(t,n,u),e)),i.push("<br/>"),i.push(e.toLocaleDateString("en",{weekday:"long"})),i.push("<br/>"),i.push(h(new Date(t,n,r),new Date(t,n,r+1),e)),i.push("</fieldset>"),i.join("")},w=24*60*60*1e3,h=function(e,t,n){const r=(t.getTime()-e.getTime())/w,o=(n.getTime()-e.getTime())/w,c=Math.floor(o/r*100),u=o.toFixed(1);return`<meter value="${o}" min="0" max="${r}" title="${c}% (${u}/${r})" style="width:75px">${c}% (${u}/${r})</meter>`},X=function(e){const t=e.getFullYear(),n=x(e,t);return n===0?x(e,t-1):n},x=function(e,t){let n=0;switch(new Date(t,0,1).getDay()){case 0:n=1;break;case 1:n=0;break;case 2:n=-1;break;case 3:n=-2;break;case 4:n=-3;break;case 5:n=3;break;case 6:default:n=2;break}const r=new Date(t,0,1+n);return Math.ceil(((e.getTime()-r.getTime())/w+1)/7)},z=()=>{if(growiFacade==null||growiFacade.markdownRenderer==null)return;const{optionsGenerators:e}=growiFacade.markdownRenderer;e.customGenerateViewOptions=(...t)=>{const n=e.generateViewOptions(...t);return n.remarkPlugins.push(D),n},e.customGeneratePreviewOptions=(...t)=>{const n=e.generatePreviewOptions(...t);return n.remarkPlugins.push(D),n}},J=()=>{};window.pluginActivators==null&&(window.pluginActivators={});window.pluginActivators[L.name]={activate:z,deactivate:J};
