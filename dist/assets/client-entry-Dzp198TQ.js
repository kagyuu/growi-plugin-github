const j="growi-plugin-github-embed",x="1.0.0",F="GROWI plugin for embed github content",O="MIT",E=["growi","growi-plugin"],I="module",G={dev:"vite",build:"tsc && vite build",preview:"vite preview"},T={react:"^18.3.1","react-dom":"^18.3.1","react-innertext":"^1.1.5",unified:"^11.0.5","unist-util-visit":"^5.0.0"},N={"@types/react":"^18.3.3","@types/react-dom":"^18.3.0","@typescript-eslint/eslint-plugin":"^5.0.0","@typescript-eslint/parser":"^5.0.0","@vitejs/plugin-react":"^4.3.1",eslint:"^8.18.0","eslint-config-next":"^14.2.4","eslint-config-weseek":"^2.1.0","eslint-import-resolver-typescript":"^3.2.5","eslint-plugin-import":"^2.29.1","eslint-plugin-jest":"^27.1.0","eslint-plugin-react":"^7.30.1","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-regex":"^1.10.0",jest:"^29.7.0",typescript:"^5.5.2",vite:"^5.3.2"},R={schemaVersion:"4",types:["script"]},C={name:j,version:x,description:F,license:O,keywords:E,type:I,scripts:G,dependencies:T,devDependencies:N,growiPlugin:R},k=function(e){if(e==null)return M;if(typeof e=="function")return w(e);if(typeof e=="object")return Array.isArray(e)?L(e):S(e);if(typeof e=="string")return $(e);throw new Error("Expected function, string, or object as test")};function L(e){const i=[];let n=-1;for(;++n<e.length;)i[n]=k(e[n]);return w(r);function r(...t){let o=-1;for(;++o<i.length;)if(i[o].apply(this,t))return!0;return!1}}function S(e){const i=e;return w(n);function n(r){const t=r;let o;for(o in e)if(t[o]!==i[o])return!1;return!0}}function $(e){return w(i);function i(n){return n&&n.type===e}}function w(e){return i;function i(n,r,t){return!!(V(n)&&e.call(this,n,typeof r=="number"?r:void 0,t||void 0))}}function M(){return!0}function V(e){return e!==null&&typeof e=="object"&&"type"in e}const P=[],q=!0,b=!1,D="skip";function H(e,i,n,r){let t;typeof i=="function"&&typeof n!="function"?(r=n,n=i):t=i;const o=k(t),s=r?-1:1;p(e,void 0,[])();function p(c,y,u){const a=c&&typeof c=="object"?c:{};if(typeof a.type=="string"){const l=typeof a.tagName=="string"?a.tagName:typeof a.name=="string"?a.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(l?"<"+l+">":""))+")"})}return h;function h(){let l=P,d,f,m;if((!i||o(c,y,u[u.length-1]||void 0))&&(l=U(n(c,u)),l[0]===b))return l;if("children"in c&&c.children){const g=c;if(g.children&&l[0]!==D)for(f=(r?g.children.length:-1)+s,m=u.concat(g);f>-1&&f<g.children.length;){const A=g.children[f];if(d=p(A,f,m)(),d[0]===b)return d;f=typeof d[1]=="number"?d[1]:f+s}}return l}}}function U(e){return Array.isArray(e)?e:typeof e=="number"?[q,e]:e==null?P:[e]}function B(e,i,n,r){let t,o,s;typeof i=="function"&&typeof n!="function"?(o=void 0,s=i,t=n):(o=i,s=n,t=r),H(e,o,p,t);function p(c,y){const u=y[y.length-1],a=u?u.children.indexOf(c):void 0;return s(c,a,u)}}const v=function(){return e=>{B(e,i=>{const n=i;if(n.name!=="github")return;const r=n.attributes.language?n.attributes.language:"plaintext",t=n.attributes.url,o="github-"+Math.random().toString(36).slice(2);n.type="html",n.value=`<div id="${o}"></div>`;const s=setInterval(()=>{document.querySelector("#"+o)!=null&&(K(r,t).then(p=>{document.querySelector("#"+o).innerHTML=p}),clearInterval(s))},100)})}},K=async function(e,i){let n="";try{const t=await fetch(i);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);n=await t.text();var r=[];return r.push('<pre><code class="language-'+e+'">'),r.push(n),r.push("</code></pre>"),r.join("")}catch(t){return console.error("Failed to fetch content from URL:",i,t),`Error loading content from ${i}: ${t instanceof Error?t.message:"Unknown error"}`}},W=()=>{if(growiFacade==null||growiFacade.markdownRenderer==null)return;const{optionsGenerators:e}=growiFacade.markdownRenderer,i=e.customGenerateViewOptions,n=e.customGeneratePreviewOptions;e.customGenerateViewOptions=(...r)=>{const t=i?i(...r):e.generateViewOptions(...r);return t.remarkPlugins.push(v),t},e.customGeneratePreviewOptions=(...r)=>{const t=n?n(...r):e.generatePreviewOptions(...r);return t.remarkPlugins.push(v),t}},X=()=>{};window.pluginActivators==null&&(window.pluginActivators={});window.pluginActivators[C.name]={activate:W,deactivate:X};
